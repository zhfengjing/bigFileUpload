# bigFileUpload
大文件上传
文件上传功能包含了断点上传和秒传，上传过程使用了有以下几个点：
1.对要上传的文件进行校验，校验的方式是使用图片头信息的方式
2.对文件进行切片并计算hash的方式来分片上传文件
3.计算hāsh使用了三种方式：（之所以这么计算是为了避免代码阻塞及浏览器卡顿的问题）
 3.1 使用webWorker开启新的进程来对文件分片进行计算hash
 3.2 使用浏览器空闲间隙来计算hash
 3.3 抽样进行hash计算，对文件取头尾各一部分(2M)，中间各分片取前中后各2个大小
4.后端对分片上传的文件进行保存，上传分片结束后调用文件合并接口，进行文件合并和储存
5.对文件分片上传并采用了并发数量控制，每次有一个上传成功了再增加下一个分片上传，上传失败的可以重新上传，重新上传有三次机会，如果三次上传都失败了，那么整个文件的上传就停止
6.如果上传过程中断之后再重新上传，那么先给后台发送个checkfile请求，看下是否有已经上传成功的分片文件，如果有，则不进行重复上传已上传的分片文件，如果没有则从头上传。
